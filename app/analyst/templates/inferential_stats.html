{% extends 'layout.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/inferential_stats.css') }}">
<script src="{{ url_for('static', filename='js/inferential_stats.js') }}"></script>

<div class="container">
    <h2>ğŸ“Š Inferential Statistics</h2>

    <form method="POST" class="inferential-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <label>Select Numerical Column:</label>
            <select name="column" required>
                <option value="">-- Select --</option>
                {% for col in numeric_cols %}
                    <option value="{{ col }}" {% if results.selected_column == col %}selected{% endif %}>{{ col }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label>Population Mean (Î¼):</label>
            <input type="number" step="0.01" name="popmean" value="100" required>
        </div>

        <div class="form-group">
            <label>Confidence Level:</label>
            <select name="confidence">
                <option value="0.90">90%</option>
                <option value="0.95" selected>95%</option>
                <option value="0.99">99%</option>
            </select>
        </div>

        <button type="submit" class="btn-submit">Calculate</button>
    </form>

    {% if results.ci %}
    <hr>
    <h3>ğŸ“ˆ Confidence Interval</h3>
    <ul>
        <li><strong>Mean:</strong> {{ results.ci.mean | round(4) }}</li>
        <li><strong>Margin of Error:</strong> Â±{{ results.ci.margin_of_error | round(4) }}</li>
        <li><strong>Interval:</strong> [{{ results.ci.ci_lower | round(4) }} , {{ results.ci.ci_upper | round(4) }}]</li>
    </ul>

    <h3>ğŸ§ª One-sample T-Test</h3>
    <ul>
        <li><strong>T-statistic:</strong> {{ results.ttest.t_statistic | round(4) }}</li>
        <li><strong>p-value:</strong> {{ results.ttest.p_value | round(6) }}</li>
        <li><strong>Conclusion:</strong>
            {% if results.ttest.reject_null %}
                âœ… Reject Null Hypothesis
            {% else %}
                âŒ Do Not Reject Null Hypothesis
            {% endif %}
        </li>
    </ul>
    {% endif %}
</div>
{% endblock %}
